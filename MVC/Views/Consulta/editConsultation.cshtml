@model Entidades.Models.Consulta;

@{
    Layout = "../Shared/_Layout.cshtml";
}

@{
    string today = @DateTime.Today.ToString("yyyy-MM-dd");
}

@{
    int edad = @ViewBag.Consulta.EdadConsulta;
}

<div class="container text-center">
    <h1 class="display-4">@ViewBag.Paciente.Nombre @ViewBag.Paciente.Apellido</h1>
    <h4>Consulta(editar)</h4>
    <br />
    <form action="/Consulta/editConsultation" method="POST">
        <div class="row">
            <div class="col">
                <label class="form-label" for="FechaAtencion">Fecha de atención: *</label>
                <input class="form-control" type="date" name="FechaAtencion" value="@ViewBag.Consulta.FechaAtencion.ToString("yyyy-MM-dd")" max="@today" required />
            </div>
            <div class="col">
                <label class="form-label" for="MotivoConsulta">Motivo Consulta: *</label>
                <input class="form-control" type="text" name="MotivoConsulta" value="@ViewBag.Consulta.MotivoConsulta" required />
            </div>
            <div class="col">
                <label class="form-label" for="EdadConsulta">Edad: </label>
                <input class="form-control" type="text" name="EdadConsulta" value="@ViewBag.Consulta.EdadConsulta" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="DiagnosticoConsulta">Diagnostico Consulta: </label>
                <input class="form-control" type="text" name="DiagnosticoConsulta" value="@ViewBag.Consulta.DiagnosticoConsulta" />
            </div>
            <div class="col">
                <label class="form-label" for="Observacion">Observación: </label>
                <input class="form-control" type="text" name="Observacion" value="@ViewBag.Consulta.Observacion" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="EvalNutric">Evaluación Nutricional: </label>
                <input class="form-control" type="text" name="EvalNutric" value="@ViewBag.Consulta.EvalNutric" />
            </div>
            <div class="col">
                <label class="form-label" for="EvalSoc">Evaluación Social: </label>
                <select class="form-control" name="EvalSoc">
                    @if (@ViewBag.Consulta.EvalSoc == "BAJO")
                    {
                        <option selected value="BAJO">BAJO</option>
                        <option value="MEDIO">MEDIO</option>
                        <option value="ALTO">ALTO</option>
                    }
                    @if (@ViewBag.Consulta.EvalSoc == "MEDIO")
                    {
                        <option value="BAJO">BAJO</option>
                        <option selected value="MEDIO">MEDIO</option>
                        <option value="ALTO">ALTO</option>
                    }
                    @if (@ViewBag.Consulta.EvalSoc == "ALTO")
                    {
                        <option value="BAJO">BAJO</option>
                        <option value="MEDIO">MEDIO</option>
                        <option selected value="ALTO">ALTO</option>
                    }
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <label class="form-label" for="ExamenFisico">Exámen Físico: </label>
                <textarea cols="120" rows="4" class="form-control" name="ExamenFisico">@ViewBag.Consulta.ExamenFisico</textarea>
                @* <input class="form-control" type="text" name="ExamenFisico" value="@ViewBag.Consulta.ExamenFisico" /> *@
            </div>
            <div class="col">
                <label class="form-label" for="Ta">Tensión arterial (TA): </label>
                <input class="form-control" type="text" name="Ta" value="@ViewBag.Consulta.Ta" />
            </div>
        </div>
        <br />
        <div class="row">
            @if (edad < 18)
            {
                <div class="col">
                    <label class="form-label" for="Peso">Peso (Kg): *</label>
                    <input class="form-control" id="historia_peso" type="text" name="Peso" value="@ViewBag.Consulta.Peso" required />
                </div>
                <div class="col">
                    <label class="form-label" for="Talla">Talla (cm): *</label>
                    <input class="form-control" id="historia_talla" type="text" name="Talla" value="@ViewBag.Consulta.Talla" required />
                </div>
            }
            else
            {
                <div class="col">
                    <label class="form-label" for="Peso">Peso (Kg):</label>
                    <input class="form-control" id="historia_peso" type="text" name="Peso" value="@ViewBag.Consulta.Peso" />
                </div>
                <div class="col">
                    <label class="form-label" for="Talla">Talla (cm):</label>
                    <input class="form-control" id="historia_talla" type="text" name="Talla" value="@ViewBag.Consulta.Talla" />
                </div>
            }
            <div class="col">
                <label class="form-label" for="Imc">Imc (Kg/M²): </label>
                <input class="form-control" id="historia_imc" type="text" name="Imc" value=@ViewBag.Consulta.Imc onfocus="calcula_imc_historia()" />
            </div>
            <div class="col">
                <label class="form-label" for="Glicemia">Glicemia (mg/dl): </label>
                <input class="form-control" type="number" name="Glicemia" value=@ViewBag.Consulta.Glicemia />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="CircCintura">Circunferencia Cintura (cms): </label>
                <input class="form-control" type="number" name="CircCintura" value=@ViewBag.Consulta.CircCintura />
            </div>
            <div class="col">
                <label class="form-label" for="CircCadera">Circunferencia de Cadera (cms): </label>
                <input class="form-control" type="number" name="CircCadera" value=@ViewBag.Consulta.CircCadera />
            </div>
        </div>
        <div class="row">
            <div class="col">
                <label class="form-label" for="Saturacion">Saturación (%): </label>
                <input class="form-control" type="number" name="Saturacion" value=@ViewBag.Consulta.Saturacion />
            </div>
            <div class="col">
                <label class="form-label" for="FrecuenciaCardiaca">Frecuencia Cardíaca: </label>
                <input class="form-control" type="number" name="FrecuenciaCardiaca" value=@ViewBag.Consulta.FrecuenciaCardiaca />
            </div>
            <div class="col">
                <label class="form-label" for="FrecuenciaRespiratoria">Frecuencia Respiratoria: </label>
                <input class="form-control" type="number" name="FrecuenciaRespiratoria" value=@ViewBag.Consulta.FrecuenciaRespiratoria />
            </div>
            <div class="col">
                <label class="form-label" for="Temperatura">Temperatura (º): </label>
                <input class="form-control" type="text" name="Temperatura" value="@ViewBag.Consulta.Temperatura" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="AgudezaDer">Agudeza Visual ojo der: </label>
                <input class="form-control" type="text" name="AgudezaDer" value="@ViewBag.Consulta.AgudezaDer" />
            </div>
            <div class="col">
                <label class="form-label" for="AgudezaIzq">Agudeza Visual ojo izq: </label>
                <input class="form-control" type="text" name="AgudezaIzq" value="@ViewBag.Consulta.AgudezaIzq" />
            </div>
            <div class="col">
                <label class="form-label" for="Ecografia">Ecografía: </label>
                <select class="form-control" name="Ecografia">
                    @if (@ViewBag.Consulta.Ecografia == 0)
                    {
                        <option selected value=0>NO</option>
                        <option value=1>SI</option>
                    }
                    else
                    {
                        <option value=0>NO</option>
                        <option selected value=1>SI</option>
                    }
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionEco">Observación Ecografía: </label>
                <input class="form-control" type="text" name="ObservacionEco" value="@ViewBag.Consulta.ObservacionEco" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Ecg">ECG:</label>
                <select class="form-control" name="Ecg">
                    @if (@ViewBag.Consulta.Ecg == 0)
                    {
                        <option selected value=0>NO</option>
                        <option value=1>SI</option>
                    }
                    else
                    {
                        <option value=0>NO</option>
                        <option selected value=1>SI</option>
                    }
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionEcg">Observación ECG: </label>
                <input class="form-control" type="text" name="ObservacionEcg" value="@ViewBag.Consulta.ObservacionEcg" />
            </div>
            <div class="col">
                <label class="form-label" for="Radiografia">Radiografía:</label>
                <select class="form-control" name="Radiografia">
                    @if (@ViewBag.Consulta.Radiografia == 0)
                    {
                        <option selected value=0>NO</option>
                        <option value=1>SI</option>
                    }
                    else
                    {
                        <option value=0>NO</option>
                        <option selected value=1>SI</option>
                    }
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionRadiografia">Observación Radiografía: </label>
                <input class="form-control" type="text" name="ObservacionRadiografia" value="@ViewBag.Consulta.ObservacionRadiografia" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Laboratorio">Laboratorio:</label>
                <select class="form-control" name="Laboratorio">
                    @if (@ViewBag.Consulta.Laboratorio == 0)
                    {
                        <option selected value=0>NO</option>
                        <option value=1>SI</option>
                    }
                    else
                    {
                        <option value=0>NO</option>
                        <option selected value=1>SI</option>
                    }
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionLab">Observacion Laboratorio: </label>
                <input class="form-control" type="text" name="ObservacionLab" value="@ViewBag.Consulta.ObservacionLab" />
            </div>
            <div class="col">
                <label class="form-label" for="EstudiosComp">Estudios Complementarios: </label>
                <input class="form-control" type="text" name="EstudiosComp" value="@ViewBag.Consulta.EstudiosComp" />
            </div>            
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Tratamiento">Tratamiento: </label>
                <input class="form-control" type="text" name="Tratamiento" value="@ViewBag.Consulta.Tratamiento" />
            </div>
            <div class="col">
                <label class="form-label" for="DerivacionAguda">Derivación Aguda:</label>
                <select class="form-control" name="DerivacionAguda">
                    @if (@ViewBag.Consulta.DerivacionAguda == 0)
                    {
                        <option selected value=0>NO</option>
                        <option value=1>SI</option>
                    }
                    else
                    {
                        <option value=0>NO</option>
                        <option selected value=1>SI</option>
                    }
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="DerivacionProg">Derivación Programada: </label>
                <input class="form-control" type="text" name="DerivacionProg" value="@ViewBag.Consulta.DerivacionProg" />
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionDeriv">Observacion Derivación: </label>
                <input class="form-control" type="text" name="ObservacionDeriv" value="@ViewBag.Consulta.ObservacionDeriv" />
            </div>
        </div>
        <br />
        @if (@ViewBag.Paciente.Sexo.ToUpper() == "FEMENINO")
        {
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Fum">Fecha última menstruación (Fum):</label>
                    <input class="form-control" type="date" name="Fum" value="@ViewBag.Consulta.Fum" max="@today" />
                </div>
                <div class="col">
                    <label class="form-label" for="MacActual">Método anticonceptivo (Mac) Actual: </label>
                    <input class="form-control" type="text" name="MacActual" value="@ViewBag.Consulta.MacActual" />
                </div>
                <div class="col">
                    <label class="form-label" for="FechaMac">Fecha Mac: </label>
                    <input class="form-control" type="date" name="FechaMac" value="@ViewBag.Consulta.FechaMac" max="@today" />
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Gestas">Gestas: </label>
                    <input class="form-control" type="number" name="Gestas" value=@ViewBag.Consulta.Gestas />
                </div>
                <div class="col">
                    <label class="form-label" for="Para">Para: </label>
                    <input class="form-control" type="number" name="Para" value=@ViewBag.Consulta.Para />
                </div>
                <div class="col">
                    <label class="form-label" for="Cesareas">Cesáreas: </label>
                    <input class="form-control" type="number" name="Cesareas" value=@ViewBag.Consulta.Cesareas />
                </div>
                <div class="col">
                    <label class="form-label" for="Abortos">Abortos: </label>
                    <input class="form-control" type="number" name="Abortos" value=@ViewBag.Consulta.Abortos />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Irs">Inicio relaciones sexuales (Irs): </label>
                    <input class="form-control" type="number" name="Irs" value=@ViewBag.Consulta.Irs />
                </div>
                <div class="col">
                    <label class="form-label" for="Menarca">Menarca: </label>
                    <input class="form-control" type="number" name="Menarca" value=@ViewBag.Consulta.Menarca />
                </div>
                <div class="col">
                    <label class="form-label" for="RitmoMenst">Ritmo Menst: </label>
                    <select class="form-control" name="RitmoMenst">
                        @if (@ViewBag.Consulta.RitmoMenst == "REGULAR")
                        {
                            <option selected value="REGULAR">REGULAR</option>
                            <option value="IRREGULAR">IRREGULAR</option>
                        }
                        else
                        {
                            <option value="REGULAR">REGULAR</option>
                            <option selected value="IRREGULAR">IRREGULAR</option>
                        }
                    </select>
                </div>
                <div class="col">
                    <label class="form-label" for="Menopausia">Menopausia: </label>
                    <input class="form-control" type="number" name="Menopausia" value=@ViewBag.Consulta.Menopausia />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="TomaPap">TomaPap: </label>
                    <input class="form-control" type="number" name="TomaPap" value=@ViewBag.Consulta.TomaPap />
                </div>
                <div class="col">
                    <label class="form-label" for="ResultadoPap">Resultado Pap: </label>
                    <input class="form-control" type="text" name="ResultadoPap" value="@ViewBag.Consulta.ResultadoPap" />
                </div>
                <div class="col">
                    <label class="form-label" for="Colposcopia">Colposcopía: </label>
                    <input class="form-control" type="text" name="Colposcopia" value="@ViewBag.Consulta.Colposcopia" />
                </div>
                <div class="col">
                    <label class="form-label" for="EstudiosComp">Estudios Complementarios: </label>
                    <input class="form-control" type="text" name="EstudiosComp" value="@ViewBag.Consulta.EstudiosComp" />
                </div>
            </div>
        }
        @if (edad < 18)
        {
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilPeso">Percentil Peso: </label>
                    <input class="form-control" type="text" name="PercentilPeso" value="@ViewBag.Consulta.PercentilPeso" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzPeso">PzPeso: </label>
                    <input class="form-control" type="text" name="PzPeso" value="@ViewBag.Consulta.PzPeso" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilTalla">Percentil Talla: </label>
                    <input class="form-control" type="text" name="PercentilTalla" value="@ViewBag.Consulta.PercentilTalla" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzTalla">PzTalla: </label>
                    <input class="form-control" type="text" name="PzTalla" value="@ViewBag.Consulta.PzTalla" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilImc">Percentil Imc: </label>
                    <input class="form-control" type="text" name="PercentilImc" value="@ViewBag.Consulta.PercentilImc" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzImc">PzImc: </label>
                    <input class="form-control" type="text" name="PzImc" value="@ViewBag.Consulta.PzImc" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Pc">Perímetro Cefálico: </label>
                    <input class="form-control" type="text" name="Pc" value="@ViewBag.Consulta.Pc" />
                </div>
                <div class="col">
                    <label class="form-label" for="PercentilPc">Percentil Pc: </label>
                    <input class="form-control" type="text" name="PercentilPc" value="@ViewBag.Consulta.PercentilPc" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzPc">PzPc: </label>
                    <input class="form-control" type="text" name="PzPc" value="@ViewBag.Consulta.PzPc" />
                </div>
            </div>
        }
        <br />
        <br />
        <input type="number" name="PacienteId" value=@ViewBag.Paciente.Id hidden />
        <input type="number" name="Id" value=@ViewBag.Consulta.Id hidden />
        <input class="btn btn-lg btn-success" type="submit" name="editar" value="Editar Consulta" />
        <a class="btn btn-lg btn-danger" href="/Paciente/viewDetails/@ViewBag.Paciente.Id">Cancelar</a>
    </form>
</div>
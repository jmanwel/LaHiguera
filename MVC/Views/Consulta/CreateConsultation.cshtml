@model Entidades.Models.Consulta;

@{
    Layout = "../Shared/_Layout.cshtml";
}

@{
    int edad = @DateTime.Today.Year - @ViewBag.Paciente.FechaNac.Year;
}

@{
    string today = @DateTime.Today.ToString("yyyy-MM-dd");
}

<div class="container text-center">
    <h1 class="display-4">@ViewBag.Paciente.Nombre @ViewBag.Paciente.Apellido</h1>
    <h4>Consulta (crear)</h4>
    <br />
    <form action="/Consulta/CreateConsultation" method="POST">
        <div class="row">
            <div class="col">
                <label class="form-label" for="FechaAtencion">Fecha de atención: *</label>
                <input class="form-control" type="date" name="FechaAtencion" value="@today" required max="@today" />
            </div>
            <div class="col">
                <label class="form-label" for="MotivoConsulta">Motivo Consulta: *</label>
                <input class="form-control" type="text" name="MotivoConsulta" value="" required />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Observacion">Observación: </label>
                <input class="form-control" type="text" name="Observacion" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Diagnostico">Diagnóstico: *</label>
                <input class="form-control" type="text" name="DiagnosticoConsulta" value="" required />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="EvalNutric">Evaluación Nutricional: </label>
                <input class="form-control" type="text" name="EvalNutric" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="EvalSoc">Evaluación Social: </label>
                <select class="form-control" name="EvalSoc">
                    <option value="BAJO" selected>BAJO</option>
                    <option value="MEDIO">MEDIO</option>
                    <option value="ALTO">ALTO</option>
                </select>
            </div>
        </div>
        <br />
        <div class="row">            
            <div class="col">
                <label class="form-label" for="Ta">Tensión arterial (TA): </label>
                <input class="form-control" type="text" name="Ta" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="Saturacion">Saturación (%): </label>
                <input class="form-control" type="number" name="Saturacion" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="FrecuenciaCardiaca">Frecuencia Cardíaca: </label>
                <input class="form-control" type="number" name="FrecuenciaCardiaca" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="FrecuenciaRespiratoria">Frecuencia Respiratoria: </label>
                <input class="form-control" type="number" name="FrecuenciaRespiratoria" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="ExamenFisico">Exámen Físico: </label>
                <textarea cols="120" rows="4" class="form-control" name="ExamenFisico"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Peso">Peso (Kg): *</label>
                <input class="form-control" type="text" id="historia_peso" name="Peso" value="" required />
            </div>
            <div class="col">
                <label class="form-label" for="Talla">Talla (cm): *</label>
                <input class="form-control" type="text" id="historia_talla" name="Talla" value="" required />
            </div>
            <div class="col">
                <label class="form-label" for="Imc">Imc (Kg/M²): </label>
                <input class="form-control" type="text" id="historia_imc" onfocus="calcula_imc_historia()" name="Imc" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="Glicemia">Glicemia (mg/dl): </label>
                <input class="form-control" type="number" name="Glicemia" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="CircCintura">Circunferencia Cintura (cms): </label>
                <input class="form-control" type="number" name="CircCintura" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="CircCadera">Circunferencia de Cadera (cms): </label>
                <input class="form-control" type="number" name="CircCadera" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="Temperatura">Temperatura (º): </label>
                <input class="form-control" type="text" name="Temperatura" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="AgudezaDer">Agudeza Visual ojo der: </label>
                <input class="form-control" type="text" name="AgudezaDer" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="AgudezaIzq">Agudeza Visual ojo izq: </label>
                <input class="form-control" type="text" name="AgudezaIzq" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="Ecografia">Ecografía: </label>
                <select class="form-control" name="Ecografia">
                    <option value=0 selected>NO</option>
                    <option value=1>SI</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionEco">Observación Ecografía: </label>
                <input class="form-control" type="text" name="ObservacionEco" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Ecg">ECG:</label>
                <select class="form-control" name="Ecg">
                    <option value=0 selected>NO</option>
                    <option value=1>SI</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionEcg">Observación ECG: </label>
                <input class="form-control" type="text" name="ObservacionEcg" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="Radiografia">Radiografía:</label>
                <select class="form-control" name="Radiografia">
                    <option value=0 selected>NO</option>
                    <option value=1>SI</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionRadiografia">Observación Radiografía: </label>
                <input class="form-control" type="text" name="ObservacionRadiografia" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Laboratorio">Laboratorio:</label>
                <select class="form-control" name="Laboratorio">
                    <option value=0 selected>NO</option>
                    <option value=1>SI</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionLab">Observacion Laboratorio: </label>
                <input class="form-control" type="text" name="ObservacionLab" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="EstudiosComp">Estudios Complementarios: </label>
                <input class="form-control" type="text" name="EstudiosComp" value="" />
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col">
                <label class="form-label" for="Tratamiento">Tratamiento: </label>
                <input class="form-control" type="text" name="Tratamiento" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="DerivacionAguda">Derivación Aguda:</label>
                <select class="form-control" name="DerivacionAguda">
                    <option value=0 selected>NO</option>
                    <option value=1>SI</option>
                </select>
            </div>
            <div class="col">
                <label class="form-label" for="DerivacionProg">Derivación Programada: </label>
                <input class="form-control" type="text" name="DerivacionProg" value="" />
            </div>
            <div class="col">
                <label class="form-label" for="ObservacionDeriv">Observacion Derivación: </label>
                <input class="form-control" type="text" name="ObservacionDeriv" value="" />
            </div>
        </div>
        @if (@ViewBag.Paciente.Sexo.ToUpper() == "FEMENINO")
        {
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Fum">Fecha última menstruación (Fum):</label>
                    <input class="form-control" type="date" name="Fum" value="" max="@today" />
                </div>
                <div class="col">
                    <label class="form-label" for="MacActual">Método anticonceptivo (Mac) Actual: </label>
                    <input class="form-control" type="text" name="MacActual" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="FechaMac">Fecha Mac: </label>
                    <input class="form-control" type="date" name="FechaMac" value="" max="@today" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Gestas">Gestas: </label>
                    <input class="form-control" type="number" name="Gestas" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="Para">Para: </label>
                    <input class="form-control" type="number" name="Para" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="Cesareas">Cesáreas: </label>
                    <input class="form-control" type="number" name="Cesareas" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="Abortos">Abortos: </label>
                    <input class="form-control" type="number" name="Abortos" value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Irs">Inicio relaciones sexuales (Irs): </label>
                    <input class="form-control" type="number" name="Irs" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="Menarca">Menarca: </label>
                    <input class="form-control" type="number" name="Menarca" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="RitmoMenst">Ritmo Menst: </label>
                    <select class="form-control" name="RitmoMenst">
                        <option value="REGULAR" selected>REGULAR</option>
                        <option value="IRREGULAR">IRREGULAR</option>
                    </select>
                </div>
                <div class="col">
                    <label class="form-label" for="Menopausia">Menopausia: </label>
                    <input class="form-control" type="number" name="Menopausia" value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="TomaPap">TomaPap: </label>
                    <input class="form-control" type="number" name="TomaPap" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="ResultadoPap">Resultado Pap: </label>
                    <input class="form-control" type="text" name="ResultadoPap" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="Colposcopia">Colposcopía: </label>
                    <input class="form-control" type="text" name="Colposcopia" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="EstudiosComp">Estudios Complementarios: </label>
                    <input class="form-control" type="text" name="EstudiosComp" value="" />
                </div>
            </div>
        }
        @if (edad < 18)
        {
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilPeso">Percentil Peso: </label>
                    <input class="form-control" type="text" name="PercentilPeso" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzPeso">PzPeso: </label>
                    <input class="form-control" type="text" name="PzPeso" value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilTalla">Percentil Talla: </label>
                    <input class="form-control" type="text" name="PercentilTalla" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzTalla">PzTalla: </label>
                    <input class="form-control" type="text" name="PzTalla" value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="PercentilImc">Percentil Imc: </label>
                    <input class="form-control" type="text" name="PercentilImc" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzImc">PzImc: </label>
                    <input class="form-control" type="text" name="PzImc" value="" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col">
                    <label class="form-label" for="Pc">Perímetro Cefálico: </label>
                    <input class="form-control" type="text" name="Pc" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="PercentilPc">Percentil Pc: </label>
                    <input class="form-control" type="text" name="PercentilPc" value="" />
                </div>
                <div class="col">
                    <label class="form-label" for="PzPc">PzPc: </label>
                    <input class="form-control" type="text" name="PzPc" value="" />
                </div>
            </div>
        }
        <br />
        <br />
        <input type="number" name="PacienteId" value=@ViewBag.Paciente.Id hidden />
        <input type="number" name="EdadConsulta" value=@edad hidden />
        <input class="btn btn-lg btn-success" type="submit" name="agregar" value="Crear Consulta" />
        <a class="btn btn-lg btn-danger" href="/Paciente/viewDetails/@ViewBag.Paciente.Id">Cancelar</a>
    </form>
</div>